<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css">    
</head>
  <body>
    <div class="topnav">
        <a href="/index">Home</a>
        <a href="/search">Search</a>
        <a href="/history">History</a>
        <a href="/forecast">Forecast</a>

        <li style="float:right"><a class="active" href="/register">Register</a></li>
    </div>

    <h1>Welcome to  Search!</h1>

    <div class="content">
        <h2>Please enter a location to view Forecasted weather data:</h2>
        <input placeholder="City/State/Zip" id="search" />
        <button onclick="getWeatherForecast()">Search</button><br><br>

        <table id="output"></table>
    </div>

    <script>
      function getWeatherForecast() {
          var city = document.getElementById("search").value;
          var url = "/weather-forecast?city=" + encodeURIComponent(city);
          
          fetch(url)
          .then(response => response.json())
          .then(data => {
            let output = "<thead>Weather Forecast for " + data.city + "</thead><tr><th>Date</th><th>Max Temperature (°F)</th>"
              +"<th>Min Temperature (°F)</th><th>Average Temperature (°F)</th><th>Sunrise</th><th>Sunset</th></tr>";
              for (let date in data.forecast) {
                let forecastData = data.forecast[date];
                if (forecastData.maxtemp && forecastData.mintemp && forecastData.astro.sunrise && forecastData.astro.sunset) {
                  let maxTemp = forecastData.maxtemp * 1.8 + 32;
                  let minTemp = forecastData.mintemp * 1.8 + 32;
                  let avgTemp = forecastData.avgtemp * 1.8 + 32;
                  let sunrise = forecastData.astro.sunrise;
                  let sunset = forecastData.astro.sunset;
                  output += "<tr><td>" + new Date(date).toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" }) + "    </td>  <td>"
                    + maxTemp.toFixed(0) + "°F</td>   <td>"
                    + minTemp.toFixed(0) + "°F</td>   <td>"
                    + avgTemp.toFixed(0) + "°F</td>  <td>"
                    + sunrise + "</td>  <td>"
                    + sunset + "</td>   </tr>";
                  } else {
                  var dateObj = new Date(date);
                  dateObj.setDate(dateObj.getDate() );
                  var options = { year: 'numeric', month: 'short', day: 'numeric' };
                  var yesterdayDate = dateObj.toLocaleDateString('en-US', options);
                  output += "<tr><td>" + yesterdayDate  + "</td><td>Could not find temperature data</td>";
                }
              }
              output += "</tr>";
              document.getElementById("output").innerHTML = output;
            })
            .catch(error => {
              document.getElementById("output").innerHTML = "<h1>" + error.message + "</h1>";
          });
        }
    </script>
  </body>
=======
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css">    
</head>
  <body>
    <div class="topnav">
        <a href="/index">Home</a>
        <a href="/search">Search</a>
        <a href="/history">History</a>
        <a href="/forecast">Forecast</a>

        <li style="float:right"><a class="active" href="/register">Register</a></li>
    </div>

    <h1>Welcome to  Search!</h1>

    <div class="content">
        <h2>Please enter a location to view Forecasted weather data:</h2>
        <input placeholder="City/State/Zip" id="search" />
        <button onclick="getWeatherForecast()">Search</button><br><br>

        <table id="output"></table>
    </div>

    <script>
      function getWeatherForecast() {
          var city = document.getElementById("search").value;
          var url = "/weather-forecast?city=" + encodeURIComponent(city);
          
          fetch(url)
          .then(response => response.json())
          .then(data => {
            let output = "<thead>Weather Forecast for " + data.city + "</thead><tr><th>Date</th><th>Max Temperature (°F)</th>"
              +"<th>Min Temperature (°F)</th><th>Average Temperature (°F)</th><th>Sunrise</th><th>Sunset</th></tr>";
              for (let date in data.forecast) {
                let forecastData = data.forecast[date];
                if (forecastData.maxtemp && forecastData.mintemp && forecastData.astro.sunrise && forecastData.astro.sunset) {
                  let maxTemp = forecastData.maxtemp * 1.8 + 32;
                  let minTemp = forecastData.mintemp * 1.8 + 32;
                  let avgTemp = forecastData.avgtemp * 1.8 + 32;
                  let sunrise = forecastData.astro.sunrise;
                  let sunset = forecastData.astro.sunset;
                  output += "<tr><td>" + new Date(date).toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" }) + "    </td>  <td>"
                    + maxTemp.toFixed(0) + "°F</td>   <td>"
                    + minTemp.toFixed(0) + "°F</td>   <td>"
                    + avgTemp.toFixed(0) + "°F</td>  <td>"
                    + sunrise + "</td>  <td>"
                    + sunset + "</td>   </tr>";
                  } else {
                  var dateObj = new Date(date);
                  dateObj.setDate(dateObj.getDate() );
                  var options = { year: 'numeric', month: 'short', day: 'numeric' };
                  var yesterdayDate = dateObj.toLocaleDateString('en-US', options);
                  output += "<tr><td>" + yesterdayDate  + "</td><td>Could not find temperature data</td>";
                }
              }
              output += "</tr>";
              document.getElementById("output").innerHTML = output;
            })
            .catch(error => {
              document.getElementById("output").innerHTML = "<h1>" + error.message + "</h1>";
          });
        }
    </script>
  </body>
>>>>>>> refs/remotes/origin/main
</html>